# GradeFlow — фронтенд

Одностраничное приложение (SPA) для учебной системы GradeFlow на базе **React + Chakra UI + Vite + TypeScript**. Поддерживаются роли **admin**, **dean**, **teacher**, **student** и персональная страница профиля.

> Бэкенд ожидается по адресу `/api` (по умолчанию `http://localhost:8080/api`), адрес настраивается через переменную окружения Vite — см. ниже. 

## Возможности

* Авторизация по ИНС (INS) и хранение токена в `localStorage`.
* Адаптивная шапка с навигацией по ролям.
* Профиль пользователя: просмотр/смена пароля, загрузка/удаление аватара (кроппер в модальном окне).
* Кабинет студента: карточки-сводки, ближайшие занятия, список предметов с оценками.
* Кабинет преподавателя: журнал оценок с быстрым вводом, поповерами, комментариями, средними по занятиям/студентам.
* Кабинет деканата: справочники групп/предметов/преподавателей/студентов, рейтинг групп, расписание, операции привязки/отвязки.
* Панель администратора: управление сотрудниками деканата (и др. сущностями в рамках фронтенда).

## Технологии

* **React 18**, **TypeScript 5**
* **Chakra UI** (включая кастомную тему и цветовую схему `brand`)
* **Vite 7** (dev server на `:5173`)
* **Axios** для запросов к API
* **Framer Motion** для анимаций
* React Router v6

## Быстрый старт

### 1) Требования

* Node.js 18+ и npm

### 2) Установка

```bash
npm i
```

### 3) Конфигурация окружения

Создайте файл `.env` (при необходимости):

```bash
# Базовый URL API (по умолчанию http://localhost:8080/api)
VITE_API_BASE_URL=http://localhost:8080/api
```

Если переменная не указана, фронтенд использует значение по умолчанию. Токен аутентификации хранится под ключом `gradeflow.auth`. 

### 4) Запуск в разработке

```bash
npm run dev
```

Откройте: `http://localhost:5173/` (сервер и порт задаёт Vite). 

### 5) Продакшн-сборка

```bash
npm run build
npm run preview  # локальный предпросмотр сборки
```

## Скрипты npm

* `dev` — запуск Vite dev-сервера
* `build` — компиляция TypeScript и сборка
* `preview` — локальный просмотр production-сборки



## Структура проекта

```
src/
  api/            # axios-клиент и функции доступа к API
  components/     # Header, AvatarEditor, ProfileSettings и др.
  hooks/          # useAvatarImage
  pages/          # маршруты/экраны по ролям (Admin, Dean, Teacher, Student, Profile, Login)
  utils/          # вспомогательные функции (имена, цвета аватаров)
  App.tsx         # корневой роутинг + shell
  main.tsx        # точка входа, ChakraProvider, BrowserRouter
  theme.ts        # расширение темы Chakra (цвета brand, стили)
index.html
vite.config.ts
package.json
tsconfig.json
```



## Роутинг и доступ

Доступ к страницам ограничен по роли, неавторизованных перенаправляем на `/login`. После входа — редирект на первый доступный маршрут для роли, также запоминается последний маршрут в `localStorage`. 

## Аутентификация

* Вход: `POST /auth/login/ins` с ИНС и паролем.
* Токен кладётся в `axios` через `Authorization: Bearer ...` (интерцептор), хранится в `localStorage` под ключом `gradeflow.auth`. При `401` выполняется очистка и редирект на `/login`. 

## Работа с файлами и аватарами

* Загрузка аватаров — `multipart/form-data`, предпросмотр и кроп внутри `AvatarEditor` (холст 512×512).
* Просмотр защищённых изображений — `useAvatarImage` выполняет авторизованный `fetch` и создаёт object URL. 

## Темизация и UI

* Кастомная цветовая схема `brand` и глобальные стили в `theme.ts`.
* Компоненты используют «мягкие» тени, плавные hover-анимации, адаптивные сетки и таблицы. 

## Разработка и вклад

1. Форк/ветка от `main`.
2. Изменения + линейные коммиты.
3. PR с описанием изменений и скриншотами UI (по возможности).

## Лицензия

MIT